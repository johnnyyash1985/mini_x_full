<div class="card comment-card p-3">
  {% if comment.id %}
    {% if comment.id %}<a class="stretched-link" href="{% if comment.id %}{% url 'comment_detail' comment.id %}{% else %}#{% endif %}"></a>{% endif %}
  {% endif %}

  <div class="text-sm text-gray-700 font-medium">@{{ comment.user.username }}</div>
  <div class="text-xs text-gray-500">{{ comment.created_at|timesince }} ago</div>

  <div class="mt-1 text-gray-800 whitespace-pre-line">{{ comment.content }}</div>

  <div class="mt-2 flex items-center gap-5 text-gray-600 action-row">
    <a class="hover:opacity-70 inline-flex items-center gap-1"
       href="{% url 'like_comment' comment.id %}?next={{ request.get_full_path|urlencode }}" title="Like">
      <i class="fa-regular fa-heart"></i><span>{{ comment.likes.count }}</span>
    </a>
    <a class="hover:opacity-70" href="{% url 'repost_comment' comment.id %}?next={{ request.get_full_path|urlencode }}" title="Repost">
      <i class="fa-solid fa-retweet"></i>
    </a>
    {% if comment.id %}
    <a class="hover:opacity-70 inline-flex items-center gap-1"
       href="{% if comment.id %}{% url 'comment_detail' comment.id %}{% else %}#{% endif %}" title="View thread / Reply">
      <i class="fa-regular fa-comment"></i>{% if comment.replies.count %}<span>{{ comment.replies.count }}</span>{% endif %}
    </a>
    {% endif %}
    {% if request.user == comment.user %}
      <a class="icon-btn" title="Delete"
         href="{% url 'delete_comment' comment.id %}?next={{ request.get_full_path|urlencode }}">
        <i class="fa-regular fa-trash-can"></i>
      </a>
    {% endif %}
  </div>
</div>
